<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sapphire Bot - Admin Dashboard</title>
    
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js';
        import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js';
        import { getFirestore, doc, getDoc, setDoc, collection, getDocs, updateDoc } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js';
        
        const firebaseConfig = {
            apiKey: "AIzaSyDwJ8K2vX3YggSiAgEAAoIBAQCrN9m",
            authDomain: "previda-bot.firebaseapp.com", 
            projectId: "previda-bot",
            storageBucket: "previda-bot.appspot.com",
            messagingSenderId: "103634852056375618973",
            appId: "1:103634852056375618973:web:xyz123"
        };
        
        window.firebaseApp = initializeApp(firebaseConfig);
        window.auth = getAuth();
        window.db = getFirestore();
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .login-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 3rem;
            text-align: center;
            box-shadow: 0 25px 50px rgba(0,0,0,0.1);
            max-width: 400px;
            width: 100%;
        }

        .dashboard-container {
            display: none;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .dashboard-header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 3px solid rgba(255,255,255,0.3);
        }

        .user-name {
            color: white;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .sidebar {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            padding: 2rem;
        }

        .main-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            padding: 2rem;
        }

        .nav-item {
            padding: 1rem;
            margin: 0.5rem 0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .nav-item:hover, .nav-item.active {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(5px);
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .section-title {
            color: white;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .command-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1rem 0;
            transition: all 0.3s ease;
        }

        .command-card:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        .command-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .command-name {
            font-size: 1.2rem;
            font-weight: 600;
            color: white;
        }

        .command-description {
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 1rem;
        }

        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
            background: #ccc;
            border-radius: 15px;
            cursor: pointer;
            transition: 0.3s;
        }

        .toggle-switch.enabled {
            background: #4CAF50;
        }

        .toggle-slider {
            position: absolute;
            top: 3px;
            left: 3px;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            transition: 0.3s;
        }

        .toggle-switch.enabled .toggle-slider {
            transform: translateX(30px);
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .btn-discord {
            background: #5865F2;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-size: 1.1rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: white;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
        }

        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            color: white;
            font-size: 1.2rem;
        }

        .config-form {
            display: grid;
            gap: 1rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .form-label {
            color: white;
            font-weight: 600;
        }

        .form-input {
            padding: 12px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
        }

        .form-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .success-message {
            background: rgba(76, 175, 80, 0.2);
            color: #4CAF50;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            display: none;
        }

        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .dashboard-header {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div class="login-container" id="loginContainer">
        <div class="login-card">
            <h1 style="color: #667eea; margin-bottom: 1rem;">🤖 Sapphire Bot</h1>
            <h2 style="margin-bottom: 1.5rem;">Admin Dashboard</h2>
            <p style="color: #666; margin-bottom: 2rem;">Sign in with Discord to manage your bot settings</p>
            <button class="btn btn-discord" onclick="loginWithDiscord()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.0190 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1568 2.4189Z"/>
                </svg>
                Login with Discord
            </button>
        </div>
    </div>

    <!-- Dashboard -->
    <div class="dashboard-container" id="dashboardContainer">
        <!-- Header -->
        <div class="dashboard-header">
            <div class="user-info">
                <img class="user-avatar" id="userAvatar" alt="User Avatar">
                <div>
                    <div class="user-name" id="userName"></div>
                    <div style="color: rgba(255,255,255,0.7);">Administrator</div>
                </div>
            </div>
            <button class="btn" onclick="logout()">Logout</button>
        </div>

        <!-- Main Grid -->
        <div class="dashboard-grid">
            <!-- Sidebar -->
            <div class="sidebar">
                <div class="nav-item active" onclick="showSection('overview')">
                    <span>📊</span> Overview
                </div>
                <div class="nav-item" onclick="showSection('commands')">
                    <span>⚡</span> Commands
                </div>
                <div class="nav-item" onclick="showSection('security')">
                    <span>🛡️</span> Security
                </div>
                <div class="nav-item" onclick="showSection('automod')">
                    <span>🤖</span> AutoMod
                </div>
                <div class="nav-item" onclick="showSection('logging')">
                    <span>📝</span> Logging
                </div>
                <div class="nav-item" onclick="showSection('tickets')">
                    <span>🎫</span> Tickets
                </div>
                <div class="nav-item" onclick="showSection('settings')">
                    <span>⚙️</span> Settings
                </div>
            </div>

            <!-- Main Content -->
            <div class="main-content">
                <!-- Overview Section -->
                <div id="overview" class="section active">
                    <h2 class="section-title">📊 Bot Overview</h2>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="serverCount">-</div>
                            <div class="stat-label">Servers</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="userCount">-</div>
                            <div class="stat-label">Total Users</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="commandCount">-</div>
                            <div class="stat-label">Commands Used Today</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="uptime">-</div>
                            <div class="stat-label">Uptime</div>
                        </div>
                    </div>

                    <div class="command-card">
                        <h3 style="color: white; margin-bottom: 1rem;">🚀 Quick Actions</h3>
                        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                            <button class="btn" onclick="refreshBot()">🔄 Refresh Bot</button>
                            <button class="btn" onclick="deployCommands()">⚡ Deploy Commands</button>
                            <button class="btn" onclick="generateBackup()">💾 Generate Backup</button>
                        </div>
                    </div>
                </div>

                <!-- Commands Section -->
                <div id="commands" class="section">
                    <h2 class="section-title">⚡ Command Management</h2>
                    <div id="commandsList" class="loading">Loading commands...</div>
                </div>

                <!-- Security Section -->
                <div id="security" class="section">
                    <h2 class="section-title">🛡️ Security Settings</h2>
                    
                    <div class="command-card">
                        <h3 style="color: white; margin-bottom: 1rem;">Anti-Raid Protection</h3>
                        <div class="config-form">
                            <div class="form-group">
                                <label class="form-label">Join Threshold (users)</label>
                                <input type="number" class="form-input" id="raidThreshold" value="10">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Time Window (seconds)</label>
                                <input type="number" class="form-input" id="raidWindow" value="30">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Auto-kick Enabled</label>
                                <div class="toggle-switch enabled" onclick="toggleSetting('autoKick')">
                                    <div class="toggle-slider"></div>
                                </div>
                            </div>
                        </div>
                        <button class="btn" onclick="saveSecuritySettings()">💾 Save Settings</button>
                    </div>

                    <div class="command-card">
                        <h3 style="color: white; margin-bottom: 1rem;">Anti-Nuke Protection</h3>
                        <div class="config-form">
                            <div class="form-group">
                                <label class="form-label">Channel Delete Limit</label>
                                <input type="number" class="form-input" id="nukeChannelLimit" value="3">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Auto-Response Enabled</label>
                                <div class="toggle-switch enabled" onclick="toggleSetting('autoResponse')">
                                    <div class="toggle-slider"></div>
                                </div>
                            </div>
                        </div>
                        <button class="btn" onclick="saveNukeSettings()">💾 Save Settings</button>
                    </div>
                </div>

                <!-- Other sections would continue here... -->
                <div id="automod" class="section">
                    <h2 class="section-title">🤖 AutoMod Configuration</h2>
                    <div class="loading">Loading AutoMod settings...</div>
                </div>

                <div id="logging" class="section">
                    <h2 class="section-title">📝 Logging Configuration</h2>
                    <div class="loading">Loading logging settings...</div>
                </div>

                <div id="tickets" class="section">
                    <h2 class="section-title">🎫 Ticket System</h2>
                    <div class="loading">Loading ticket settings...</div>
                </div>

                <div id="settings" class="section">
                    <h2 class="section-title">⚙️ General Settings</h2>
                    <div class="loading">Loading general settings...</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentUser = null;
        let currentSection = 'overview';
        
        // Discord OAuth (simulated - you'd integrate real Discord OAuth)
        function loginWithDiscord() {
            // Simulate Discord login
            setTimeout(() => {
                currentUser = {
                    id: '123456789',
                    username: 'AdminUser',
                    discriminator: '0001',
                    avatar: 'https://cdn.discordapp.com/embed/avatars/0.png'
                };
                
                document.getElementById('loginContainer').style.display = 'none';
                document.getElementById('dashboardContainer').style.display = 'block';
                
                document.getElementById('userName').textContent = currentUser.username;
                document.getElementById('userAvatar').src = currentUser.avatar;
                
                loadDashboardData();
            }, 1000);
        }
        
        function logout() {
            currentUser = null;
            document.getElementById('loginContainer').style.display = 'flex';
            document.getElementById('dashboardContainer').style.display = 'none';
        }
        
        function showSection(sectionName) {
            // Update navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.closest('.nav-item').classList.add('active');
            
            // Update sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionName).classList.add('active');
            
            currentSection = sectionName;
            
            // Load section-specific data
            loadSectionData(sectionName);
        }
        
        function loadDashboardData() {
            // Load overview stats
            document.getElementById('serverCount').textContent = '2';
            document.getElementById('userCount').textContent = '1,337';
            document.getElementById('commandCount').textContent = '42';
            document.getElementById('uptime').textContent = '99.9%';
        }
        
        function loadSectionData(section) {
            switch(section) {
                case 'commands':
                    loadCommandsData();
                    break;
                case 'security':
                    loadSecurityData();
                    break;
                // Add other cases...
            }
        }
        
        function loadCommandsData() {
            const commandsList = document.getElementById('commandsList');
            commandsList.innerHTML = '';
            
            const commands = [
                { name: 'ban', description: 'Ban a user from the server', enabled: true, category: 'Moderation' },
                { name: 'kick', description: 'Kick a user from the server', enabled: true, category: 'Moderation' },
                { name: 'warn', description: 'Warn a user', enabled: true, category: 'Moderation' },
                { name: 'mute', description: 'Mute a user', enabled: false, category: 'Moderation' },
                { name: 'panel', description: 'Create ticket panel', enabled: true, category: 'Tickets' },
                { name: 'lock', description: 'Lock channels', enabled: true, category: 'Security' },
                { name: 'log', description: 'Manual logging', enabled: true, category: 'Logging' },
                { name: 'automod', description: 'AutoMod configuration', enabled: true, category: 'AutoMod' }
            ];
            
            commands.forEach(cmd => {
                const commandCard = document.createElement('div');
                commandCard.className = 'command-card';
                commandCard.innerHTML = `
                    <div class="command-header">
                        <div>
                            <div class="command-name">/${cmd.name}</div>
                            <div class="command-description">${cmd.description}</div>
                            <div style="color: rgba(255,255,255,0.6); font-size: 0.9rem;">${cmd.category}</div>
                        </div>
                        <div class="toggle-switch ${cmd.enabled ? 'enabled' : ''}" onclick="toggleCommand('${cmd.name}')">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                `;
                commandsList.appendChild(commandCard);
            });
        }
        
        function toggleCommand(commandName) {
            const toggle = event.target.closest('.toggle-switch');
            toggle.classList.toggle('enabled');
            
            // Here you would make an API call to the bot
            console.log(`Toggling command: ${commandName}`, toggle.classList.contains('enabled'));
        }
        
        function toggleSetting(settingName) {
            const toggle = event.target.closest('.toggle-switch');
            toggle.classList.toggle('enabled');
            
            console.log(`Toggling setting: ${settingName}`, toggle.classList.contains('enabled'));
        }
        
        function saveSecuritySettings() {
            const settings = {
                raidThreshold: document.getElementById('raidThreshold').value,
                raidWindow: document.getElementById('raidWindow').value,
                autoKick: document.querySelector('[onclick="toggleSetting(\'autoKick\')"]').classList.contains('enabled')
            };
            
            console.log('Saving security settings:', settings);
            showSuccessMessage('Security settings saved successfully!');
        }
        
        function saveNukeSettings() {
            const settings = {
                nukeChannelLimit: document.getElementById('nukeChannelLimit').value,
                autoResponse: document.querySelector('[onclick="toggleSetting(\'autoResponse\')"]').classList.contains('enabled')
            };
            
            console.log('Saving nuke settings:', settings);
            showSuccessMessage('Anti-nuke settings saved successfully!');
        }
        
        function showSuccessMessage(message) {
            const successDiv = document.createElement('div');
            successDiv.className = 'success-message';
            successDiv.textContent = message;
            successDiv.style.display = 'block';
            
            document.querySelector('.main-content').prepend(successDiv);
            
            setTimeout(() => {
                successDiv.remove();
            }, 3000);
        }
        
        // Quick action functions
        function refreshBot() {
            showSuccessMessage('Bot refresh initiated!');
        }
        
        function deployCommands() {
            showSuccessMessage('Commands deployed successfully!');
        }
        
        function generateBackup() {
            showSuccessMessage('Backup generated and saved!');
        }
    </script>
</body>
</html>
